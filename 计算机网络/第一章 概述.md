# 第一章 概述

## 1.1 计算机网络在信息时代中的作用

​	21世纪重要特征就是**数字化**,**网络化**和**信息化**,它是一个**以网络为核心的信息时代**. 要实现信息化就必须依靠完善的网络, 因为网络可以非常迅速的传递信息. 

### 		<img src="C:\Users\Foisca\AppData\Roaming\Typora\typora-user-images\image-20200608113640794.png" alt="image-20200608113640794" style="zoom: 67%;" />

​	这里说的网络是指"三网", 即**电信网络**,**有线电视网络**和**计算机网络**. 

1. 电信网络可向用户提供电话,电报及传真等服务.

2. 有线电视网络可向用户提供各种电视节目.

3. 计算机网络可使用户能够迅速传送数据文件,以及从网络上查找并获取各种有用资料,包括图片和视频文件.

   这三种网络在信息化过程中都起到了十分重要的作用, 但是其中发展最快的并起到核心作用的是计算机网络, 这正是我们将要讨论的内容.

​	随着技术的发展, 电信网络和有线电视网络都逐渐融入了现代计算机网络技术, 这就产生了"**网络融合**"的概念. 现在计算机网络不仅能传送数据,同时也能够向用户提供打电话,听音乐和观看视频节目的服务, 而电信网络和有线电视网络也都能够链接到计算机网络上.

​	计算机网络向用户提供的最重要的功能有连个:

1. **连通性**
2. **共享**

## 1.2 因特网概述

### 1.2.1 网络的网络

起源于美国的因特网现已发展成世界上最大的国际性计算机互联网.

​	**网络(network)**是若干**结点(node)**和链接这些节点的**链路(link)**组成. 网络中的结点可以是计算机, 集成器, 交换机或者路由器等. 

​	网络和网络还可以通过路由器互连起来, 这样就构成了一个覆盖范围更大的网络, 即互联网. 因此互联网是"**网络的网络(network networks)**".

​	**因特网**是世界上最大的互联网络. 习惯上,大家把连接在因特网上的计算机都称为**主机(host)**.

​	**网络把许多计算机连接在一起, 而因特网则把许多网络连接在一起.**

​	还有一点需要注意, 就是网络互连并不是把计算机简单地在物理上连接起来, 因为这样做并不能达到计算机之间能够相互交换信息的目的. 我们还必须在计算机上安装许多使计算机能够交换信息的软件才行, 因而计算机之间可以通过网络交换信息.

### 1.2.2 因特网发展的三个阶段

1. 从单个网络ARPANET向互联网发展的过程. 

   1969年美国国防部创建的第一个分组交换网ARPANET最初只是一个单个的分组交换网(并不是一个互连的网络). 所有要连接在ARPANET上的主机都直接与就近的节点交换机相连. 但到了上世纪70年代中期,人们已认识到不可能仅使用一个单独的网络来满足所有的通信问题. 于是ARPA开始研究多种网咯互联技术. 1983年,TCP/IP协议称为AEPANET上的标准协议,使得所有使用TCP/IP协议的计算机都能利用互联网相互通信, 因而人们把1983年作为因特网诞生的时间. 1990年,ARPANET正式宣布关闭, 因为他的实验任务已经完成.

   * 以小写字母i开始的internet(互联网或互连网)是一个通用名词, 它泛指多个计算机网络互连而成的网络. 在这些网络之间的通信协议(通信规则)是可以任意的.
   * 以大写字母I开始的Internet(因特网)则是一个专用名词,它指当前全球最大的,开放的,由众多网络相互连接而成的特定计算机网络, 它采用TCP/IP协议作为通信的规则,且其前身是美国的ARPANET.

2. 第二阶段的特点是建成了三级结构的**因特网**.

3. 第三阶段的特点是逐渐形成了多层地ISP结构的因特网.

   因特网服务提供者ISP(Internet Service Provider)(又称:因特网服务提供商). 例如中国电信, 中国联通和中国移动就是我国最有名的ISP.

   根据提供服务的覆盖面积大小及所拥有的IP地址数量的不同, ISP分为不同层次: 主干ISP, 地区ISP和本地ISP

   * 主干ISP由几个专门的公司创建和维持, 服务面积最大(一般都能覆盖国家范围), 并且拥有高速主干网. 有些地区ISP网络也可以与主干ISP相连.
   * 地区ISP是一些较小的ISP. 这些地区ISP通过一个或多个主干ISP连接起来. 他们位于等级中的第二层,传输效率也低一些.
   * 本地ISP给端用户提供直接的服务. 本地ISP可以连接到地区ISP, 也可以直接连接到主干ISP. 绝大多数端用户都是连接到本地ISP. 本地ISP可以是一个仅仅提供因特网服务的公司, 也可以是一个有用网络并向自己的雇员提供服务的企业, 或者是一个运行自己的网络的非营利机构(如学员或大学).本地ISP也可以与地区ISP或主干ISP链接.

因特网交换点IXP(**I**nternet e**x**change **P**oint)

IXP的主要作用就是允许两个网络直接相连,并交换分组,而不需要再通过第三个网络来分组.

## 1.3 因特网的组成

​	尹腾的拓扑结构虽然非常复杂,并且在地理上覆盖了全球,但从其工作方式上看, 可以划分一下两大块:

1. 边缘部分	由所欲连接在因特网上的主机组成. 这部分是用户直接使用的,用来进行通信(传输数据,音频或视频)和资源共享
2. 核心部分     由大量网络和连接这些网络的路由器组成. 这部分是为边缘部分提供服务的(提供连通性和交换)

### 1.3.1 因特网的边缘部分

​	处在因特网边缘的部分就是连接在因特网上所有的主机. 这些主机又称为**端系统(end system)**, "端"就是末端的意思及因特网的末端. 

​	首先明确下面的概念: 我们说"主机A和主机B进行通信", 实际上是指:"运行在主机A上的某个程序和运行在主机B上的另一个程序进行通信". 由于"进程"就是运行着的程序", 因此这也就是指:"主机A的某个进程和主机B上的另一个进程进行通信". 这种比较严密的说法通常可以简称为**"计算机之间的通信"**

在网络边缘的端系统之间的通信方式通常可划分为两大类：客户－服务器方式CC/S 方式）和对等方式(P2P 方式） :

1.  #### 客户－服务器方式(C/S)

    客户(client)和服务器(server)都是指通信中所涉及的两个应用进程.客户－服务器方式所描述的是进程之间服务和被服务的关系。

    

    客户是服务请求方，服务器是服务提供方。

    

    在实际应用中，客户程序和服务器程序通常还具有以下一些主要特点。

    **客户程序：**

    1.  被用户调用后运行，在通信时主动向远地服务器发起通信（请求服务）。因此，客户程序必须知道服务器程序的地址。
    2.  不需要特殊的硬件和很复杂的操作系统。

    **服务器程序：**

    1.  是一种专门用来提供某种服务的程序，可同时处理多个远地或本地客户的请求。
    2.  系统启动后即自动调用并一直不断地运行着，被动地等待并接受来自各地的客户的
        通信请求。因此，服务器程序不需要知道客户程序的地址。
    3.  一般需要有强大的硬件和高级的操作系统支持。

    上面所说的客户和服务器本来都指的是计算机进程(软件)。.使用计算机的人是计算机的“用户" (user)而不是“客户" (client) .但在许多国外文献中，经常也把运行客户程序的机器称为client (在这种情况下也可把client 译为“客户机"), 把运行服务器程序的机器称为server。因此我们应当根据上下文来判断client 或server 是指软件还是硬件。

2.  #### 对等连接方式(P2P)

    对等连接(peer-to-peer, 简写为P2P) 是指两个主机在通信时并不区分哪一个是服务请求方还是服务提供方.只要两个主机都运行了对等连接软件(P2P 软件）,它们就可以进行平等的,对等连接通信.这时,双方都可以下载对方已经存储在硬盘中的共享文档。因此这种工作方式也称为P2P 文件共享.

    在图1-8 中, 主机C,D,E 和F 都运行了P2P 软件,因此这
    几个主机都可进行对等通信（如C 和D, E 和F, 以及C 和F) .

    实际上,对等连接方式从本质上看仍然是使用客户－服务器方式,只是对等连接中的每一个主机既是客户又同时是服务器.

    例如主机C, 当C 请求D 的服务时, C 是客户,D 是服务器.但如果C 又同时向F提供服务，那么C 又同时起着服务器的作用.

    ![image-20200608112010286](C:\Users\Foisca\AppData\Roaming\Typora\typora-user-images\image-20200608112010286.png)		     

## 1.4 计算机网络在我国的发展

## 1.5 计算机网络的类别

<img src="C:\Users\Foisca\AppData\Roaming\Typora\typora-user-images\image-20200608193511684.png" alt="image-20200608193511684" style="zoom: 67%;" />

![image-20200608200541406](C:\Users\Foisca\AppData\Roaming\Typora\typora-user-images\image-20200608200541406.png)

### 1.5.1 计算机网络的定义

计算机网络的精确定义并未统一。

关于计算机网络的最简单的定义是：一些互相连接的、自治的计算机的集合。这里“自治”的概念即独立的计算机，它有自己的硬件和软件，可以单独运行使用，而“互相连接”是指计算机之间能够进行数据通信或交换信息。

### 1.5.2 几种不同类别的网络

1.  #### 按网络的作用范围进行分类

    1.  广域网WAN (Wide Area Network): 广域网的作用范围通常为几十到几千公里，因而有时也称为远程网(long haul network).广域网是因特网的核心部分，其任务是通过长距离( 例如，跨越不同的国家)运送主机所发送的数据。连接广域网各结点交换机的链路一般都是高速链路， 具有较大的通信容量。
    2.  城域网MAN (Metropolitan Area Network): 城域网的作用范围一般是一个城市，可跨越几个街区甚至整个的城市，其作用距离约为5 - 50 km 。城域网可以为一个或几个单位所拥有，但也可以是一种公用设施，用来将多个局域网进行互连。目前，很多城域网采用的是以太网技术，因此城域网有时也常纳入局域网的范围进行讨论。
    3.  局域网LAN (Local Area Network): 局域网一般用微型计算机或工作站通过高速通信线路相连(速率通常在10 Mb/s 以上)，但地理上则局限在较小的范围(如1 km 左右) .在局域网发展的初期， 一个学校或工厂往往只拥有一个局域网，但现在局域网已非常广泛地使用， 一个学校或企业大都拥有许多个互连的局域网(这样的网络常称为校园网或企业网).我们将在第3 章3.3 节至3.6 节详细讨论局域网.
    4.  个人区域网PAN (Personal Area Network): 个人区域网就是在个人工作的地方把属于个人使用的电子设备(如便携式电脑等)用无线技术连接起来的网络，因此也常称为无线个人区域网WPAN (Wireless PAN), 其范围大约在10m 左右。

2.  #### 按网络的使用者进行分类

    1.  公用网(public network): 这是指电信公司（国有或私有）出资建造的大型网络。“公用”的意思就是所有愿意按电信公司的规定交纳费用的人都可以使用这种网络。因此公用网也可称为公众网，如CHINANET 。

    2.  专用网(private network): 这是某个部门、某个行业为各自的特殊业务工作需要而建造的网络。这种网络不对外人提供服务。例如，政府、军队、银行、铁路、电力、公安等系统均有本系统的专用网。

        

        公用网和专用网都可以传送多种业务。如传送的是计算机数据，则分别是公用计算机网络和专用计算机网络。

3.  #### 用来把用户接入到因特网的网络

    这种网络就是接入网AN (Access Network), 它又称为本地接入网或居民接入网。这是一类比较特殊的计算机网络。我们在前面的1.2.2 节已经介绍了用户必须通过ISP 才能接入到因特网。由于从用户家中接入到因特网可以使用的技术有许多种，因此就出现了可以使用多种接入网技术连接到因特网的情况.接入网本身既不属于因特网的核心部分，也不属于因特网的边缘部分.接入网是从某个端系统到另一个端系统的路径中，由这个端系统到第一个路由器(也称为边缘路由器)之间的一些物理链路所组成。从覆盖的范围看，很多接入网还是属于局域网。从作用上看，接入网只是起到让用户能够与因特网连接的“桥梁”作用.在因特网发展初期，用户多用电话线拨号接入因特网，速率很低(每秒几于比特到几十千比特)，因此那时并没有使用接入网这个名词。直到最近，由于出现了多种宽带接入技术，宽带接入网才成为因特网领域中的一个热门课题.

## 1.6 计算机网络的性能

计算机网络的性能一般是指它的几个重要的性能指标.但除了这些重要的性能指标外，还有一些非性能特征(nonperformance characteristics) 也对计算机网络的性能有很大的影响.

### 1.6.1 计算机网络的性能指标

<img src="C:\Users\Foisca\AppData\Roaming\Typora\typora-user-images\image-20200608193638107.png" alt="image-20200608193638107" style="zoom:50%;" />

性能指标从不同的方面来度量计算机网络的性能。下面介绍常用的七个性能指标。

1.  #### 速率

    ​	计算机发送出的信号都是数字形式的。比特(bit) 是计算机中数据量的单位，也是信息论中使用的信息量的单位.英文单词bit 来源于binary digit, 意思是一个“二进制数字”,因此一个比特就是二进制数字中的一个1 或0.网络技术中的速率指的是连接在计算机网络上的主机在数字信道上传送数据的速率,它也称为数据率(data rate)或比特率(bit rate) 。速率是计算机网络中最重要的一个性能指标。速率的单位是b/s (比特每秒)(或bit/s, 有时也写为bps, 即bit per second) 。当数据率较高时，就可以用kb/s (k = 10^3^ =千), Mb/s CM= 10^6^ =兆), Gb/s CG= 10^9^ = 吉)或Tb/s CT= 10^12^ =太).现在人们常用更简单的但很不严格的记法来描述网络的速率，如100M 以太网，而省略了单位中的b/s,它的意思是速率为100 Mb/s 的以太网。顺便指出，上面所说的速率往往是指额定速率或标称速率。

2.  #### 带宽

    “带宽" (bandwidth)有以下两种不同的意义：

    1.  带宽本来是指某个信号具有的频带宽度.信号的带宽是指该信号所包含的各种不同频率成份所占据的频率范围. 例如,在传统的通信线路上传送的电话信号的标准带宽是3.1 kHz(从300 Hz 到3.4 kHz, 即话音的主要成分的频率范围).这种意义的带宽的单位是赫(或千赫,兆赫,吉赫等).在过去很长的一段时间，通信的主干线路传送的是模拟信号(即连续变化的信号).因此,表示通信线路允许通过的信号频带范围就称为线路的带宽(或通频带).
    2.  在计算机网络中,带宽用来表示网络的通信线路传送数据的能力,因此网络带宽表示在单位时间内从网络中的某一点到另一点所能通过的“最高数据率”.在本书中在提到“带宽”时，主要是指这个意思。这种意义的带宽的单位是“比特每秒”,记为b/s .在这种单位的前面也常常加上于(k) 、兆CM) 、吉CG) 或太CT) 这样的倍数.

    在“带宽”的两种表述中，前者为频域称谓，而后者为时域称谓，其本质是相同的。也
    就是说， 一条通信链路的“带宽”越宽，其所能传输的“最高数据率”也越高。

3.  #### 吞吐量

    吞吐量(throughput)表示在单位时间内通过某个网络（或信道、接口）的数据量。吞吐量更经常地用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络。显然，吞吐量受网络的带宽或网络的额定速率的限制。例如，对千一个100 Mb/s的以太网，其额定速率是100 Mb/s, 那么这个数值也是该以太网吞吐量的绝对上限值。因此，对于100 Mb/s 的以太网，其典型的吞吐量可能只有70 Mb/s 。请注意，有时吞吐量还可用每秒传送的字节数或帧数来表示。

4.  #### 时延

    ​	时延(delay 或latency)是指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。时延是个很重要的性能指标，它有时也称为延迟或迟延。需要注意的是，网络中的时延是由以下几个不同的部分组成的：

    1.  **发送时延**: 发送时延(transmission delay) 是主机或路由器发送数据帧所需要的时间，也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间。因此发送时延也叫做“传输时延”。发送时延的计算公式是：
        $$
        发送时延 =\frac{数据帧长度(b)}{发送速率(bis)}
        $$
        

        由此可见，对于一定的网络，发送时延并非固定不变，而是与发送的帧长（单位是比
        特）成正比，与发送速率成反比。

    2.  **传播时延**: 传播时延(propagation delay)是电磁波在信道中传播一定的距离需要花费的时间。传播时延的计算公式是：
        $$
        传播时延 = \frac{信道长度(m)}{电磁波在信道上的传播速度(m/s)}
        $$
        

        电磁波在自由空间的传播速率是光速，即3.Q X 105 km/s 。电磁波在网络传输媒体中的传播速率比在自由空间要略低一些：在铜线电缆中的传播速率约为2.3 X 105 km/s, 在光纤中的传播速率约为2.Q X 105 km/s 。例如， 1000 km 长的光纤线路产生的传播时延大约为5ms 。

    ​    以上两种时延不要弄混.只要理解这两种时延发生的地方,就不会把它们弄混.发送时延发生在机器的内部的发送器中(一般就是发生在网络适配器中); 而传播时延则发生在机器外部的传输信道媒体上。

    ​	可以用一个简单的比喻来说明。假定有10辆车的车队从公路收费站入口出发到相距50 公里的目的地。再假定每一辆车过收费站要花费6 秒钟，而车速是每小时100 公里。现在可以算出整个车队从收费站到目的地总共要花费的时间：发车时间共需60 秒（相当于网络中的发送时延），行车时间需要30 分钟（相当于网络中的传播时延），因此总共花费的时间是31 分钟。

    

    下面两种时延也需要考虑，但比较容易理解。

    

    		3. **处理时延**: 主机或路由器在收到分组时要花费一定的时间进行处理,例如分析分组的首部,从分组中提取数据部分,进行差错检验或查找适当的路由等等,这就产生了处理时延。
      		4. **排队时延**: 分组在经过网络传输时，要经过许多路由器。但分组在进入路由器后要先在输入队列中排队等待处理。在路由器确定了转发接口后，还要在输出队列中排队等待转发。这就产生了排队时延。排队时延的长短往往取决于网络当时的通信量。当网络的通信量很大时会发生队列溢出，使分组丢失，这相当于排队时延为无穷大。

    这样， 数据在网络中经历的总时延就是以上四种时延之和：
    $$
    总时延＝发送时延＋传播时延＋处理时延＋排队时延
    $$

5.  #### 时延带宽积

    把以上讨论的网络性能的两个度量——传播时延和带宽一相乘， 就得到另一个很有用的度量：传播时延带宽积，即:
    $$
    时延带宽积 ＝ 传播时延 * 带宽
    $$

6.  #### 往返时间RTT

    在计算机网络中， 往返时间RTT (Round-Trip Time)也是一个重要的性能指标，它表示从发送方发送数据开始，到发送方收到来自接收方的确认（接收方收到数据后便立即发送确认），总共经历的时间。对于上述例子，往返时间RTT 是40 ms, 而往返时间和带宽的乘积是4 X 105 (bit) 。在互联网中，往返时间还包括各中间结点的处理时延、排队时延以及转发数据时的发送时延。	

    当使用卫星通信时，往返时间RTT 相对较长， 是很重要的一个性能指标。

7.  #### 利用率

    利用率有信道利用率和网络利用率两种。信道利用率指出某信道有百分之儿的时间是被利用的（有数据通过） 。完全空闲的信道的利用率是零。网络利用率则是全网络的信道利用率的加权平均值。信道利用率并非越高越好。这是因为，根据排队论的理论，当某信道的利用率增大时，该信道引起的时延也就迅速增加。这和高速公路的情况有些相似。当高速公路上的车流量很大时，由于在公路上的某些地方会出现堵塞，因此行车所需的时间就会增长。网络也有类似的情况。当网络的通信量很少时，网络产生的时延并不大。但在网络通信量不断增大的情况下，由于分组在网络结点（路由器或结点交换机）进行处理时需要排队等候，因此网络引起的时延就会增大。如果令以表示网络空闲时的时延， D 表示网络当前的时延，那么在适当的假定条件下，可以用下面的简单公式(1-5)来表示D 和D。及网络利用率U 之间的关系：
    $$
    信道利用率 = \frac{有数据通过时间}{(有+无)数据通过的时间}
    \\
    网络利用率: 信道利用率加权品均值
    \\
    D = \frac{D_0}{1-U}
    $$
    式中， U 是网络的利用率，数值在0 到1 之间。当网络的利用率达到其容量的1/2 时，时延就要加倍。特别值得注意的是： 当网络的利用率接近最大值1 时，网络的时延就趋于无穷大。因此我们必须有这样的概念： 信道或网络利用率过高会产生非常大的时延。图1-16给出了上述概念的示意图。因此， 一些拥有较大主干网的ISP 通常控制他们的信道利用率不超过50% 。如果超过了就要准备扩容，增大线路的带宽。

    <img src="C:\Users\Foisca\AppData\Roaming\Typora\typora-user-images\image-20200608194805092.png" alt="image-20200608194805092" style="zoom:67%;" />

### 1.6.2 计算机网络的非性能特征

计算机网络还有一些非性能特征也很重要。这些非性能特征与前面介绍的性能指标有很大的关系:

1.  费用

    网络的价格（包括设计和实现的费用）总是必须考虑的，因为网络的性能与其价格密切相关。一般说来，网络的速率越高，其价格也越高。

2.  质量

    网络的质量取决于网络中所有构件的质量，以及这些构件是怎样组成网络的。网络的质量影响到很多方面， 如网络的可靠性、网络管理的简易性，以及网络的一些性能。但网络的性能与网络的质量并不是一回事。例如，有些性能也还可以的网络，运行一段时间后就出现了故障，变得无法再继续工作，说明其质量不好。高质量的网络往往价格也较高。

3.  标准化

    网络的硬件和软件的设计既可以按照通用的国际标准，也可以遵循特定的专用网络标准。最好采用国际标准的设计，这样可以得到更好的互操作性，更易于升级换代和维修，也更容易得到技术上的支待。

4.  可靠性

    可靠性与网络的质量和性能都有密切关系。速率更高的网络的可靠性不一定会更差。但速率更高的网络要可靠地运行，则往往更加困难，同时所需的费用也会较高。

5.  可扩展性和可升级性

    在构造网络时就应当考虑到今后可能会需要扩展（即规模扩大）和升级（即性能和版本的提高） 。网络的性能越高， 其扩展费用往往也越高， 难度也会相应增加。

6.  易于管理和维护

    网络如果没有良好的管理和维护，就很难达到和保持所设计的性能。

    

    ## 计算机网络体系结构

    <img src="C:\Users\Foisca\AppData\Roaming\Typora\typora-user-images\image-20200608202408553.png" alt="image-20200608202408553" style="zoom:67%;" />

    ### 1.7.1 计算机网络体系结构的形成

    计算机网络是个非常复杂的系统。为了说明这一点，可以设想一个最简单的情况：连接在网络上的两台计算机要互相传送文件。
    显然，在这两台计算机之间必须有一条传送数据的通路。但这还远远不够， 至少还有以下几项工作需要去完成：

    1.  发起通信的计算机必须将数据通信的通路进行激活(ac tivate) 。所谓“激活”就是要发出一些信令，保证要传送的计算机数据能在这条通路上正确发送和接收。
    2.  要告诉网络如何识别接收数据的计算机。
    3.  发起通信的计算机必须查明对方计算机是否已开机，并且与网络连接正常。
    4.  发起通信的计算机中的应用程序必须弄清楚， 在对方计算机中的文件管理程序是否己做好接收文件和存储文件的准备工作。
    5.  若计算机的文件格式不兼容，则至少其中的一台计算机应完成格式转换功能。
    6.  对出现的各种差错和意外事故，如数据传送错误、重复或丢失，网络中某个结点交换机出故障等，应当有可靠的措施保证对方计算机最终能够收到正确的文件。

    还可以举出一些要做的其他工作。由此可见，相互通信的两个计算机系统必须高度协调工作才行，而这种“协调”是相当复杂的。为了设计这样复杂的计算机网络，早在最初的ARPANET 设计时即提出了分层的方法。”分层”可将庞大而复杂的问题，转化为若干较小的局部问题，而这些较小的局部问题就比较易于研究和处理。

    

    

    

    

    